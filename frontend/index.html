<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Campus Events - Choose Role</title>

  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="style.css">
</head>
<body>

  <div class="landing-wrap">
    <div class="landing-card">
      <h1>Campus Events</h1>
      <p class="landing-subtitle">Choose how you want to continue.</p>

      <div class="role-grid">
        <div class="role-card">
          <h2>Student</h2>
          <p>Browse events and register for a spot.</p>
          <button class="primary-btn" onclick="goStudent()">Continue as Student</button>
        </div>

        <div class="role-card">
          <h2>Staff</h2>
          <p>Check in attendees and review attendance.</p>
          <label class="role-label" for="staffPin">Staff PIN (optional)</label>
          <input class="pin-input" type="password" id="staffPin" placeholder="Enter staff PIN">
          <button class="primary-btn" onclick="goStaff()">Continue as Staff</button>
          <p id="pinError" class="pin-error" aria-live="polite"></p>
        </div>
      </div>
    </div>
  </div>

<script>
const STAFF_PIN = "1234"; // Change this to your staff PIN.

function goStudent() {
    sessionStorage.removeItem("staffAuthed");
    sessionStorage.removeItem("staffPin");
    window.location.href = "student.html";
}

function goStaff() {
    const pinInput = document.getElementById("staffPin");
    const pinError = document.getElementById("pinError");
    const enteredPin = pinInput.value.trim();
    const pinRequired = STAFF_PIN.trim().length > 0;

    pinError.textContent = "";

    if (pinRequired && enteredPin !== STAFF_PIN) {
        pinError.textContent = "Invalid staff PIN. Please try again.";
        pinInput.focus();
        return;
    }

    sessionStorage.setItem("staffAuthed", "true");
    sessionStorage.setItem("staffPin", pinRequired ? enteredPin : "");
    window.location.href = "dashboard.html";
}

document.addEventListener('DOMContentLoaded', () => {
    const params = new URLSearchParams(window.location.search);
    if (params.get("staff") === "1") {
        const pinError = document.getElementById("pinError");
        pinError.textContent = "Staff access requires the staff PIN.";
    }
    const staffPinInput = document.getElementById("staffPin");
    staffPinInput.addEventListener("keydown", (event) => {
        if (event.key === "Enter") {
            goStaff();
        }
    });
});
</script>

</body>
</html>
